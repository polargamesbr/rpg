.text-shadow-sm { text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
.custom-scrollbar::-webkit-scrollbar { width: 4px; }
.custom-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
.custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
.perspective-2000 { perspective: 2000px; }
.animate-marquee { animation: marquee 5s linear forwards; }
@keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

.enemy-tarot { 
    width: 220px; height: 360px; position: relative; 
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); 
    cursor: pointer; transform-style: preserve-3d; filter: grayscale(0.1); 
    transform: translateX(var(--tx, 0px)) translateY(var(--ty, 0px)) scale(var(--s, 1));
    z-index: 10;
}
.enemy-tarot:hover { --ty: -20px !important; --s: 1.06 !important; filter: grayscale(0) brightness(1.1); z-index: 100 !important; }
.enemy-tarot.selected { filter: grayscale(0) brightness(1.1); box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.8), 0 0 30px rgba(220, 38, 38, 0.3); border-radius: 16px; z-index: 20; }
/* Attacking state highlight */
.enemy-tarot[style*="--s: 1.1"] { z-index: 200 !important; }

@keyframes hitWiggle { 
    0% { transform: translate(0, 0) rotate(0deg); } 
    25% { transform: translate(-5px, 2px) rotate(-5deg); filter: brightness(2) sepia(1) hue-rotate(-50deg) saturate(3); } 
    50% { transform: translate(5px, -2px) rotate(5deg); } 
    75% { transform: translate(-5px, 2px) rotate(-5deg); } 
    100% { transform: translate(0, 0) rotate(0deg); filter: none; } 
}

/* Hollywood Screen Shake */
.shake-screen { animation: violentShake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes violentShake {
    0%, 100% { transform: translate(0, 0); }
    10%, 30%, 50%, 70%, 90% { transform: translate(-10px, 5px); }
    20%, 40%, 60%, 80% { transform: translate(10px, -5px); }
}

/* Background Flash Effects */
.bg-flash-red { animation: bgPulseRed 0.4s ease-out; }
@keyframes bgPulseRed { 0% { background-color: rgba(220, 38, 38, 0.4); } 100% { background-color: transparent; } }
.bg-flash-yellow { animation: bgPulseYellow 0.5s ease-out; }
@keyframes bgPulseYellow { 0% { background-color: rgba(251, 191, 36, 0.3); } 100% { background-color: transparent; } }

.floater { 
    position: absolute; 
    font-size: 4rem; 
    color: white; 
    pointer-events: none; 
    animation: hollywoodPop 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; 
    font-family: 'Cinzel', serif; 
    font-weight: 900; 
    z-index: 500; 
    text-shadow: 0 0 10px rgba(0,0,0,1), 0 0 20px rgba(255,255,255,0.6), 2px 2px 0px rgba(0,0,0,0.8);
    white-space: nowrap;
}
.floater.crit { 
    color: #fbbf24; 
    font-size: 6rem !important; 
    animation: hollywoodCrit 1.8s cubic-bezier(0.18, 0.89, 0.32, 1.4) forwards; 
    text-shadow: 0 0 20px rgba(251, 191, 36, 0.6), 0 0 40px rgba(251, 191, 36, 0.9), 4px 4px 0px rgba(0,0,0,0.8); 
}
.floater.miss { 
    color: #a8a29e; 
    font-size: 2.5rem !important; 
    animation: hollywoodPop 2s ease-out forwards; 
    opacity: 0.8; 
    font-style: italic; 
}

@keyframes hollywoodPop { 
    0% { transform: translate(-50%, 0) scale(0.1) rotate(-20deg); opacity: 0; filter: brightness(2); } 
    15% { transform: translate(-50%, -60px) scale(1.6) rotate(10deg); opacity: 1; filter: brightness(1); } 
    80% { transform: translate(-50%, -80px) scale(1.4) rotate(5deg); opacity: 1; }
    100% { transform: translate(-50%, -150px) scale(0.8) rotate(0deg); opacity: 0; } 
}
@keyframes hollywoodCrit { 
    0% { transform: translate(-50%, 0) scale(0.3) rotate(30deg); opacity: 0; filter: brightness(3) blur(2px); } 
    20% { transform: translate(-50%, -80px) scale(2.2) rotate(-15deg); opacity: 1; filter: brightness(1.5) blur(0px); } 
    85% { transform: translate(-50%, -100px) scale(1.8) rotate(-5deg); opacity: 1; }
    100% { transform: translate(-50%, -180px) scale(1.2) rotate(10deg); opacity: 0; } 
}

.enemy-tarot.dead { transform: translate(150%, 150%) rotate(15deg) scale(0.8) !important; opacity: 0.6 !important; pointer-events: none; filter: grayscale(1); z-index: 0; position: absolute; right: 0; bottom: 0; }

/* Prompt Overlay */
#prompt-overlay {
    position: fixed; top: 20%; left: 0; right: 0; z-index: 350;
    text-align: center; pointer-events: none; opacity: 0; transform: scale(0.8);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
#prompt-overlay.active { opacity: 1; transform: scale(1); }
#prompt-content {
    display: inline-block; padding: 1rem 4rem;
    background: rgba(220, 38, 38, 0.4); backdrop-blur: 15px;
    border-top: 4px solid #ef4444; border-bottom: 4px solid #ef4444;
    color: white; font-family: 'Cinzel', serif; font-weight: 900;
    font-size: 4rem; letter-spacing: 0.8em; text-transform: uppercase;
    text-shadow: 0 0 30px #ef4444, 0 0 60px #ef4444;
    animation: pulseText 1s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 100px rgba(239, 68, 68, 0.2);
}
@keyframes pulseText { 0% { transform: scale(1); filter: brightness(1); } 100% { transform: scale(1.05); filter: brightness(1.5); } }

.enemy-tarot.selected { 
    box-shadow: 0 0 0 4px #ef4444, 0 0 40px rgba(239, 68, 68, 0.6); 
    filter: brightness(1.3) contrast(1.1) grayscale(0); transform: translateX(var(--tx, 0px)) translateY(-40px) scale(1.1) !important;
}

.slash-effect {
    position: absolute; inset: 0;
    background: linear-gradient(135deg, transparent 45%, rgba(255,255,255,0.8) 50%, transparent 55%);
    background-size: 200% 200%;
    filter: drop-shadow(0 0 10px white);
    transform: rotate(-45deg) scaleX(0);
    opacity: 0;
    z-index: 100;
}
.slashing .slash-effect { animation: slashAnim 0.4s cubic-bezier(0.19, 1, 0.22, 1) forwards; display: block !important; }
@keyframes slashAnim { 0% { transform: rotate(-45deg) translate(-100%, -100%) scaleX(0); opacity: 0; } 50% { transform: rotate(-45deg) translate(0, 0) scaleX(1.5); opacity: 1; } 100% { transform: rotate(-45deg) translate(100%, 100%) scaleX(1); opacity: 0; } }

/* Parry Animations */
.parry-active #parry-cursor { animation: parryMove var(--dur, 1.5s) linear forwards; }
@keyframes parryMove { 0% { left: 0%; } 100% { left: 100%; } }

.attention-pulse { animation: attentionPulse 1s infinite; box-shadow: 0 0 15px rgba(251,191,36,0.6); border-color: rgba(251,191,36,1) !important; }
@keyframes attentionPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

.intent-icon { animation: floatIntent 1s ease-in-out infinite alternate; }
@keyframes floatIntent { from { transform: translateY(0); } to { transform: translateY(-5px); } }

/* Target Crosshair Effect */
.target-marker { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; opacity: 0; transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1); pointer-events: none; z-index: 45; transform: scale(1.5); background: rgba(220, 38, 38, 0.05); }
.selected .target-marker { opacity: 1; transform: scale(1); }

.mira-ring { position: absolute; width: 140px; height: 140px; border: 2px dashed rgba(239, 68, 68, 0.4); border-radius: 50%; animation: rotateMira 6s linear infinite; }
.mira-ring-outer { position: absolute; width: 180px; height: 180px; border: 1px solid rgba(239, 68, 68, 0.1); border-radius: 50%; }

.mira-corners { position: absolute; width: 180px; height: 260px; animation: pulseMira 1s ease-in-out infinite alternate; }
.mira-corner { position: absolute; width: 24px; height: 24px; border: 4px solid #ef4444; filter: drop-shadow(0 0 5px #ef4444); }
.mira-corner-tl { top: 0; left: 0; border-right: 0; border-bottom: 0; border-radius: 4px 0 0 0; }
.mira-corner-tr { top: 0; right: 0; border-left: 0; border-bottom: 0; border-radius: 0 4px 0 0; }
.mira-corner-bl { bottom: 0; left: 0; border-right: 0; border-top: 0; border-radius: 0 0 0 4px; }
.mira-corner-br { bottom: 0; right: 0; border-left: 0; border-top: 0; border-radius: 0 0 4px 0; }

@keyframes rotateMira { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes pulseMira { from { transform: scale(0.98); } to { transform: scale(1.02); } }

/* Victory Extras */
.animate-bounce-slow { animation: bounceSlow 3s ease-in-out infinite; }
@keyframes bounceSlow { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

.loot-item-reveal { animation: lootReveal 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; opacity: 0; transform: translateY(20px); }
@keyframes lootReveal { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

.enemy-summary-reveal { animation: enemyReveal 0.5s ease-out forwards; opacity: 0; transform: scale(0.8); }
@keyframes enemyReveal { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

.rarity-common { border-color: rgba(168, 162, 158, 0.1); background: rgba(255,255,255,0.02); }
.rarity-uncommon { border-color: rgba(34, 197, 94, 0.3); background: rgba(34, 197, 94, 0.05); }
.rarity-rare { border-color: rgba(59, 130, 246, 0.3); background: rgba(59, 130, 246, 0.05); }
.rarity-epic { border-color: rgba(168, 85, 247, 0.3); background: rgba(168, 85, 247, 0.05); }
.rarity-legendary { border-color: rgba(245, 158, 11, 0.3); background: rgba(245, 158, 11, 0.05); box-shadow: 0 0 20px rgba(245,158,11,0.1); }
